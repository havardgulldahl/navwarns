messages:
  - role: system
    content: You are an expert maritime navigation assistant.
  - role: user
    content: |-
      You will be given a Navigational Warning (NavWarn).
      You will parse the text and classify it into one of the following
      categories: "military", "accident" or "other".  If the NavWarn is related
      to military activity, like missile tests or marine exercises, classify it
      as "military". If the NavWarn describes an accident or incident, classify it as
      "accident". Otherwise, classify it as "other".
      You will also summarize the NavWarn in a title of maximum four words,
      suited as a header in a popup.  
      <text>
      {{navwarn}}
      </text>
model: openai/gpt-4.1
responseFormat: json_schema
jsonSchema: |-
  {
    "name": "NavWarnClassification",
    "strict": true,
    "schema": {
      "type": "object",
      "required": ["category", "title"],
      "properties": {
        "category": {
          "type": "string",
          "enum": [
            "military",
            "accident",
            "other"
          ]
        },
        "title": {
          "type": "string",
          "maxLength": 100
        }
      },
      "additionalProperties": false
    }
  }
